<!doctype html>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<title>Gatitos voladores üê±</title>
<meta name="description" content="Conejitos lanzan emojis de gatitos hacia arriba y caen con gravedad.">
<style>
  :root{ --bg1:#0f0f1b; --bg2:#1c1b2a; }
  *{ box-sizing:border-box }
  html,body{ height:100%; margin:0 }
  body{
    background:radial-gradient(1200px 800px at 70% 10%, var(--bg2), var(--bg1) 60%);
    color:#fff; font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,'Noto Sans',sans-serif;
    overflow:hidden; touch-action:manipulation;
  }
  #stage{ position:relative; width:100%; height:100%; }
  .bunny{
    position:fixed; bottom:18px; font-size:68px; user-select:none; pointer-events:none;
    filter: drop-shadow(0 6px 16px rgba(0,0,0,.35));
    animation: hop 1.3s ease-in-out infinite;
  }
  #bunny-left{ left:14px; }
  #bunny-right{ right:14px; transform:scaleX(-1); }
  .bunny::before{ content:"üêá"; display:block; }
  @keyframes hop { 0%,100%{ transform:translateY(0) } 50%{ transform:translateY(-10px) } }

  .cat{
    position:absolute; left:0; top:0; will-change:transform,opacity;
    font-size:38px; pointer-events:none; filter: drop-shadow(0 4px 10px rgba(0,0,0,.4));
    transform: translate(-50%, -50%) rotate(0deg);
  }

  .hint{
    position:fixed; bottom:10px; left:50%; transform:translateX(-50%);
    padding:8px 12px; border-radius:999px;
    background:rgba(255,255,255,.08); border:1px solid rgba(255,255,255,.18);
    font-weight:700; color:#ffd1e8; text-shadow:0 2px 10px rgba(0,0,0,.5);
    user-select:none; pointer-events:none; font-size:14px;
  }
</style>
</head>
<body>
  <div id="stage" role="application" aria-label="Gatitos voladores">
    <div id="bunny-left" class="bunny" aria-hidden="true"></div>
    <div id="bunny-right" class="bunny" aria-hidden="true"></div>
    <div class="hint">toc√° la pantalla para lanzar m√°s üê±</div>
  </div>

<script>
(function(){
  var stage = document.getElementById('stage');
  function W(){ return stage.clientWidth }
  function H(){ return stage.clientHeight }
  function rand(a,b){ return Math.random()*(b-a)+a }

  // Par√°metros de f√≠sica
  var GRAV = 0.22;      // gravedad (px / frame^2)
  var DRAG = 0.0025;    // leve fricci√≥n horizontal
  var SPAWN_EVERY = 180; // ms entre disparos por conejo
  var MAX_CATS = 240;   // l√≠mite de part√≠culas en pantalla

  var cats = [];
  var lastTime = performance.now();

  function spawnCat(x, y, vx, vy, size, rot){
    if(cats.length >= MAX_CATS) return;
    var el = document.createElement('div');
    el.className = 'cat';
    el.textContent = 'üê±';
    el.style.fontSize = size + 'px';
    stage.appendChild(el);
    cats.push({el: el, x:x, y:y, vx:vx, vy:vy, r:rot, life:0});
  }

  function shootFromBunny(side){
    var x = (side === 'left') ? 52 : (W() - 52);
    var y = H() - 78;
    // Velocidad inicial hacia arriba + poca variaci√≥n lateral
    var baseVy = - (rand(6.8, 8.8));  // px/frame
    var baseVx = (side === 'left') ? rand(1.0, 2.6) : -rand(1.0, 2.6);
    // Crear una peque√±a r√°faga de 2-3 gatitos
    var n = Math.random() < 0.5 ? 2 : 3;
    for (var i=0;i<n;i++){
      spawnCat(
        x + rand(-6, 6),
        y + rand(-6, 6),
        baseVx + rand(-0.6, 0.6),
        baseVy + rand(-0.8, 0.6),
        rand(28, 44),
        rand(-10, 10)
      );
    }
  }

  // R√°faga al tocar/click
  function burstAt(cx, cy){
    var count = 16;
    for (var i=0;i<count;i++){
      var ang = Math.random()*Math.PI*2;
      var sp = rand(3.5, 6.5);
      spawnCat(
        cx, cy,
        Math.cos(ang)*sp,
        Math.sin(ang)*sp - 2.0,   // un poco hacia arriba
        rand(26, 40),
        rand(-20, 20)
      );
    }
  }

  // Animaci√≥n principal
  function tick(now){
    var dt = Math.min(32, now - lastTime); // ms
    lastTime = now;
    var n = cats.length;
    for (var i=n-1; i>=0; i--){
      var c = cats[i];
      // F√≠sica por frame (normalizamos un poco por dt)
      var steps = Math.max(1, Math.round(dt/16));
      for (var s=0; s<steps; s++){
        c.vy += GRAV;                 // gravedad
        c.vx *= (1 - DRAG);           // drag suave
        c.x += c.vx;
        c.y += c.vy;
        c.r += c.vx * 0.15;           // giro leve
      }
      c.life += dt;

      c.el.style.transform = 'translate(' + c.x + 'px,' + c.y + 'px) rotate(' + c.r + 'deg)';
      // desaparecer si sale de pantalla o vive mucho
      if (c.y > H()+80 || c.x < -80 || c.x > W()+80 || c.life > 12000){
        if (c.el && c.el.parentNode) c.el.parentNode.removeChild(c.el);
        cats.splice(i,1);
      }
    }
    requestAnimationFrame(tick);
  }

  // Disparos autom√°ticos desde los conejitos
  setInterval(function(){ shootFromBunny('left');  }, SPAWN_EVERY);
  setInterval(function(){ shootFromBunny('right'); }, SPAWN_EVERY);

  // Interacci√≥n
  stage.addEventListener('click', function(e){ burstAt(e.clientX, e.clientY); }, false);
  stage.addEventListener('touchstart', function(e){
    var t = e.touches[0]; burstAt(t.clientX, t.clientY);
  }, {passive:true});

  // Arranque
  requestAnimationFrame(function(t){ lastTime = t; requestAnimationFrame(tick); });
})();
</script>
</body>
</html>
