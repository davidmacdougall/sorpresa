<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Sorpresa para mi sobrinita ‚ù§Ô∏è</title>
  <meta name="description" content="Conejitos kawaii, lluvia de mensajitos y una carita de gatito hecha de corazoncitos.">
  <style>
    :root{ --bg1:#0f0f1b; --bg2:#1c1b2a; }
    *{ box-sizing:border-box; }
    html,body{height:100%;margin:0}
    body{
      overflow:hidden;
      background:radial-gradient(1200px 800px at 70% 10%, var(--bg2), var(--bg1) 60%);
      color:#fff; font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,'Noto Sans',sans-serif;
      touch-action:manipulation;
    }
    #stage{ position:relative; width:100%; height:100%; cursor:pointer; }
    .center-start{ position:absolute; inset:0; display:grid; place-content:center; text-align:center; gap:14px; user-select:none; }
    .title{ font-weight:900; font-size:clamp(28px,6vw,56px); text-shadow:0 8px 24px rgba(0,0,0,.45); }
    .tap{ padding:12px 18px; border-radius:999px; border:1px solid rgba(255,255,255,.25);
          background:rgba(255,255,255,.12); backdrop-filter:blur(8px);
          font-weight:800; box-shadow:0 6px 24px rgba(0,0,0,.25); cursor:pointer; }
    .love{ position:absolute; will-change:transform,opacity; pointer-events:none; font-weight:800; white-space:nowrap;
           filter:drop-shadow(0 6px 16px rgba(0,0,0,.25)); text-shadow:0 2px 8px rgba(0,0,0,.45); user-select:none; }
    .heartParticle{ position:absolute; pointer-events:none; font-size:14px; will-change:left,top,opacity; }
    .heartParticle.eye{ font-size:18px; }
    .heartParticle.mouth{ font-size:16px; }
    .bunny{ position:fixed; bottom:22px; font-size:64px; user-select:none; pointer-events:none;
            filter: drop-shadow(0 6px 16px rgba(0,0,0,.35)); animation: bunnyBounce 1.2s ease-in-out infinite; }
    #bunny-left{ left:14px; }  #bunny-right{ right:14px; transform: scaleX(-1); }
    .bunny::before{ content:"üêá"; display:block; }
    .footer-note{ position:fixed; bottom:8px; left:50%; transform:translateX(-50%);
      font-weight:700; color:#ffd1e8; text-shadow:0 2px 10px rgba(0,0,0,.6);
      background:rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.15);
      border-radius:999px; padding:8px 12px; backdrop-filter: blur(6px); user-select:none; pointer-events:none; font-size:14px; }
    @keyframes bunnyBounce{ 0%,100%{ transform: translateY(0) } 50%{ transform: translateY(-9px) } }
  </style>
</head>
<body>
  <div id="stage" role="application">
    <div id="start" class="center-start">
      <div class="title">te prepare una sorpresa ‚ú®</div>
      <button id="startBtn" class="tap" type="button">Empezar üí´</button>
      <div style="opacity:.7;font-size:14px">Si no avanza, toc√° el bot√≥n o la pantalla</div>
    </div>
    <div id="bunny-left" class="bunny" aria-hidden="true"></div>
    <div id="bunny-right" class="bunny" aria-hidden="true"></div>
    <div class="footer-note">para vos üíñ</div>
  </div>

  <script>
  (function(){
    var stage = document.getElementById('stage');
    var startOverlay = document.getElementById('start');
    var startBtn = document.getElementById('startBtn');
    var started = false;

    function W(){ return stage.clientWidth; }
    function H(){ return stage.clientHeight; }
    function rand(a,b){ return Math.random()*(b-a)+a; }
    function rint(a,b){ return Math.floor(rand(a,b+1)); }

    // Frases y colores
    var phrases = ["te quiero mucho sobrinita üíï", "tontita üòú"];
    var rainColors = ["#ff4d6d","#ff99cc","#ff3366","#ff66b2","#ffd1e8"];
    function rcol(){ return rainColors[rint(0,rainColors.length-1)]; }
    function rphrase(){ return phrases[rint(0,phrases.length-1)]; }

    // -------- Lluvia (reducida) --------
    function makeNode(){
      var el = document.createElement('span');
      el.className = 'love';
      el.textContent = rphrase();
      el.style.color = rcol();
      el.style.fontSize = rand(16, 44) + 'px';
      return el;
    }
    function spawnRain(){
      var node = makeNode();
      stage.appendChild(node);
      node.style.left = rand(0, W()) + 'px';
      node.style.top  = '-24px';
      node.style.opacity = 0;
      node.style.transition = 'top 5.2s linear, opacity .6s ease';
      setTimeout(function(){
        node.style.opacity = 1;
        node.style.top = (H()-120) + 'px';
      }, 20);
      setTimeout(function(){ if(node && node.parentNode){ node.parentNode.removeChild(node); } }, 5400);
    }
    function startRain(){
      for (var i=0;i<30;i++) (function(ii){ setTimeout(spawnRain, ii*35); })(i); // 30 iniciales m√°s juntos
      setInterval(function(){ var n=rint(1,2); while(n--) spawnRain(); }, 220);  // 1‚Äì2 c/220ms
    }

    // -------- Burst por click --------
    function spawnBurst(x,y, mult){
      mult = mult || 30;
      for(var i=0;i<mult;i++){
        var node = makeNode();
        stage.appendChild(node);
        node.style.left = x+'px';
        node.style.top  = y+'px';
        node.style.opacity = 1;
        node.style.transition = 'transform 1.1s cubic-bezier(.2,.8,.2,1), opacity 1.1s ease';
        (function(n){
          var ang = Math.random()*Math.PI*2;
          var sp  = rand(80, 220);
          var dx = Math.cos(ang)*sp, dy = Math.sin(ang)*sp;
          setTimeout(function(){ n.style.transform = 'translate('+dx+'px,'+dy+'px)'; n.style.opacity = 0; }, 20);
          setTimeout(function(){ if(n && n.parentNode) n.parentNode.removeChild(n); }, 1200);
        })(node);
      }
    }

    // -------- Geometr√≠a utilitaria --------
    function circlePoints(cx, cy, r, count, jitter){
      jitter = jitter || 0;
      var pts = [];
      for(var i=0;i<count;i++){
        var t = (i/count) * Math.PI*2;
        var j = jitter ? (Math.random()-0.5)*jitter : 0;
        pts.push([cx + Math.cos(t)*(r+j), cy + Math.sin(t)*(r+j)]);
      }
      return pts;
    }
    function fillCircle(cx, cy, r, count){
      var pts=[]; for(var i=0;i<count;i++){
        var a = Math.random()*Math.PI*2;
        var rr = Math.sqrt(Math.random())*r;
        pts.push([cx + Math.cos(a)*rr, cy + Math.sin(a)*rr]);
      } return pts;
    }
    function linePoints(x1,y1,x2,y2,count){
      var pts=[], i; for(i=0;i<count;i++){ var t=i/(count-1); pts.push([x1+(x2-x1)*t, y1+(y2-y1)*t]); } return pts;
    }
    function fillTriangle(ax,ay,bx,by,cx,cy,count){
      var pts=[], i; for(i=0;i<count;i++){
        var r1=Math.random(), r2=Math.random(); if (r1+r2>1){ r1=1-r1; r2=1-r2; }
        var x = ax + (bx-ax)*r1 + (cx-ax)*r2; var y = ay + (by-ay)*r1 + (cy-ay)*r2; pts.push([x,y]);
      } return pts;
    }

    // -------- Carita de gatito HD (bien reconocible) --------
    function buildCatSections(){
      var cx = W()/2, cy = H()*0.43;
      var base = Math.min(W(), H());
      var R = base * 0.25;               // cara grande protagonista
      var earH = R * 0.9, earW = R*0.95;
      var eyeR = R * 0.12;
      var mouthR = R * 0.10;

      var faceColor = "#ff8fb8";   // cara
      var earColor  = "#ff6fa5";   // orejas
      var eyeColor  = "#0b0b18";   // ojos
      var mouthColor= "#ff4d6d";   // boca

      var sections = [];

      // Cara (borde + relleno)
      sections.push({pts: circlePoints(cx, cy, R, 260, R*0.02), color: faceColor, cls: ""});
      sections.push({pts: fillCircle(cx, cy, R*0.98, 620), color: faceColor, cls: ""});

      // Oreja izquierda
      var elx = cx - R*0.62, ely = cy - R*0.18;
      var e1a = [elx - earW*0.35, ely - earH];
      var e1b = [elx + earW*0.35, ely - earH];
      var e1c = [elx, ely - earH*0.10];
      sections.push({pts: linePoints(e1a[0],e1a[1], e1b[0],e1b[1], 70)
                       .concat(linePoints(e1b[0],e1b[1], e1c[0],e1c[1], 70),
                               linePoints(e1c[0],e1c[1], e1a[0],e1a[1], 70)), color: earColor, cls: ""});
      sections.push({pts: fillTriangle(e1a[0],e1a[1], e1b[0],e1b[1], e1c[0],e1c[1], 320), color: earColor, cls: ""});

      // Oreja derecha
      var erx = cx + R*0.62, ery = cy - R*0.18;
      var e2a = [erx - earW*0.35, ery - earH];
      var e2b = [erx + earW*0.35, ery - earH];
      var e2c = [erx,  ery - earH*0.10];
      sections.push({pts: linePoints(e2a[0],e2a[1], e2b[0],e2b[1], 70)
                       .concat(linePoints(e2b[0],e2b[1], e2c[0],e2c[1], 70),
                               linePoints(e2c[0],e2c[1], e2a[0],e2a[1], 70)), color: earColor, cls: ""});
      sections.push({pts: fillTriangle(e2a[0],e2a[1], e2b[0],e2b[1], e2c[0],e2c[1], 320), color: earColor, cls: ""});

      // Ojos (relleno + borde)
      var eyeLX = cx - R*0.45, eyeY = cy - R*0.02;
      var eyeRX = cx + R*0.45;
      sections.push({pts: fillCircle(eyeLX, eyeY, eyeR*0.95, 260), color: eyeColor, cls: "eye"});
      sections.push({pts: circlePoints(eyeLX, eyeY, eyeR, 100, eyeR*0.03), color: eyeColor, cls: "eye"});
      sections.push({pts: fillCircle(eyeRX, eyeY, eyeR*0.95, 260), color: eyeColor, cls: "eye"});
      sections.push({pts: circlePoints(eyeRX, eyeY, eyeR, 100, eyeR*0.03), color: eyeColor, cls: "eye"});

      // Boca tipo "3" (dos semic√≠rculos)
      var mox = cx + R*0.10, moy = cy + R*0.16;
      var upper = circlePoints(mox, moy - mouthR*0.65, mouthR, 140).slice(0,70);
      var lower = circlePoints(mox, moy + mouthR*0.65, mouthR, 140).slice(0,70);
      sections.push({pts: upper.concat(lower), color: mouthColor, cls: "mouth"});

      return sections;
    }

    function spawnParticleTo(x0,y0, x1,y1, color, cls, delay, glyph){
      var el = document.createElement('div');
      el.className = 'heartParticle' + (cls ? ' '+cls : '');
      el.textContent = glyph || '‚ù§';
      el.style.position = 'absolute';
      el.style.left = x0+'px'; el.style.top = y0+'px';
      el.style.color = color || '#fff';
      el.style.opacity = 0;
      stage.appendChild(el);
      var dur = rand(700,1100);
      setTimeout(function(){
        el.style.transition = 'left '+dur+'ms ease-out, top '+dur+'ms ease-out, opacity '+dur+'ms ease-in';
        el.style.left = x1+'px'; el.style.top = y1+'px'; el.style.opacity = 1;
        setTimeout(function(){
          el.style.transition = 'opacity 700ms ease';
          el.style.opacity = 0;
          setTimeout(function(){ if(el && el.parentNode){ el.parentNode.removeChild(el);} }, 720);
        }, dur+500);
      }, delay || 0);
    }

    function formationCatFaceHD(){
      var leftSrc  = {x: 60, y: H()-110};
      var rightSrc = {x: W()-60, y: H()-110};
      var sections = buildCatSections();
      var i=0, s, p, src, glyph;
      for (var si=0; si<sections.length; si++){
        s = sections[si];
        for (var pi=0; pi<s.pts.length; pi++){
          p = s.pts[pi];
          src = (i%2===0) ? leftSrc : rightSrc;
          glyph = (s.cls === 'eye') ? '‚óè' : '‚ù§'; // ojos s√≥lidos para mayor contraste
          spawnParticleTo(src.x, src.y, p[0], p[1], s.color, s.cls, i*2.2, glyph);
          i++;
        }
      }
    }

    function startFormationLoop(){
      formationCatFaceHD();
      setInterval(formationCatFaceHD, 5200);
    }

    // -------- Inicio / interacci√≥n --------
    function startAll(){
      if (started) return; started = true;
      if (startOverlay && startOverlay.parentNode) startOverlay.parentNode.removeChild(startOverlay);
      startRain();
      startFormationLoop();
    }
    stage.addEventListener('click', function(e){ if(!started) startAll(); else spawnBurst(e.clientX, e.clientY, 30); }, false);
    stage.addEventListener('touchstart', function(e){ var t=e.touches[0]; if(!started) startAll(); else spawnBurst(t.clientX, t.clientY, 30); }, false);
    if (startBtn) startBtn.addEventListener('click', function(){ startAll(); }, false);
    setTimeout(function(){ if(!started) startAll(); }, 1800); // auto-inicio de respaldo
  })();
  </script>
</body>
</html>
